# ReForge Scripts

A collection of optimization scripts designed to enhance the performance and functionality of SDXL WebUI ReForge. These scripts focus on improving generation speed, analyzing outputs, and providing intelligent configuration management.

## Scripts Overview

### üöÄ SpeedBoost
*Location: `speedboost/`*

Performance optimization scripts that implement various techniques to accelerate image generation with minimal quality impact.

**Features:**
- **FP16 (Half Precision)** - Reduces memory usage and increases computation speed
- **Inference Mode** - Disables autograd tracking for better performance
- **Memory Optimization** - Implements efficient memory management techniques
- **Conservative Mode** - Safer optimizations that avoid compatibility issues
- **Advanced Optimizations** - Additional performance enhancements for experienced users
- **Performance Tracking** - Real-time statistics and speedup measurements

**Versions:**
- `v1.0` - Initial implementation with core optimizations
- `v2.0` - Enhanced memory management and safety checks
- `v2.1` - Improved compatibility with different model types
- `v2.2` - Added dynamic step optimization
- `v2.3.1` - Enhanced precision handling and VAE optimizations
- `v2.3.2` - Improved ReForge compatibility
- `v2.3.3` - Latest version with comprehensive optimization suite

### ‚öôÔ∏è AutoCFG
*Location: `autocfg/`*

Intelligent CFG (Classifier-Free Guidance) optimization that dynamically adjusts CFG scale during generation for optimal balance between prompt adherence and generation speed.

**Features:**
- **Dynamic CFG Adjustment** - Real-time CFG modification during generation
- **Multiple Transition Curves** - Linear, Exponential, Cosine, and Sigmoid curves
- **Early Step Preservation** - Maintains original CFG for critical early steps
- **Intelligent Prompt Analysis** - Automatic parameter optimization based on prompt complexity
- **Debug Logging** - Comprehensive monitoring and logging capabilities

**Versions:**
- `v1.0` - Basic dynamic CFG adjustment with manual configuration
- `v2.0` - Added fully automatic mode with intelligent prompt analysis

**v2.0 Intelligence Features:**
- Analyzes prompt complexity using multiple factors
- Detects detail, style, and quality keywords
- Automatically calculates optimal CFG parameters
- Adapts to different generation contexts

### üîç AnalyzePNG
*Location: `analyzepng/`*

Utility script for extracting and analyzing metadata from PNG files generated by Stable Diffusion, particularly useful for understanding generation parameters and settings.

**Features:**
- **Metadata Extraction** - Retrieves embedded generation parameters
- **Parameter Analysis** - Displays prompts, seeds, steps, CFG scale, and other settings
- **Batch Processing** - Can analyze multiple images
- **Auto-dependency Installation** - Automatically installs required PIL library if missing

## Installation

1. Clone or download this repository
2. Copy the desired script files to your WebUI ReForge scripts directory
3. Restart WebUI ReForge
4. The scripts will appear in the interface as extensions

## Usage

### SpeedBoost
1. Enable "Speed Boost" in the script section
2. Choose "Conservative Mode" for safer optimizations (recommended)
3. Select specific optimizations based on your hardware and requirements
4. Monitor performance statistics in the interface

### AutoCFG
1. Enable "Auto CFG Optimizer" in the script section
2. For automatic mode: Enable "Fully Automatic Mode" and let the script analyze your prompts
3. For manual mode: Configure start/end values, curve type, and preservation percentage
4. Monitor CFG adjustments in the debug output

### AnalyzePNG
1. Run the script directly with Python
2. Modify the `sample_images` list to point to your generated images
3. View extracted metadata and generation parameters

## Compatibility

- **Primary Target**: SDXL WebUI ReForge
- **Python Version**: 3.8+
- **Dependencies**: PyTorch, Gradio, PIL/Pillow
- **GPU**: CUDA-compatible GPUs recommended for optimal performance

## Performance Notes

- SpeedBoost optimizations can provide significant speed improvements, but results vary by hardware
- FP16 mode offers the largest performance gains but may cause issues with some models
- Conservative mode is recommended for stability
- AutoCFG can reduce generation time while maintaining quality by optimizing CFG scheduling

## License

MIT License - See [LICENSE](LICENSE) file for details.